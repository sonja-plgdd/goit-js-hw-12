{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseURL = 'https://pixabay.com/api/';\nconst myAPIKey = '46844024-31822d2c5a5dcad2dc3c03c6f';\n\n\nexport async function fetchData(inputValue, page) {\n    try {\n        const response = await axios.get(baseURL, {\n            params: {\n                key: myAPIKey,\n                q: inputValue,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                per_page: 15,\n                page: page\n            }\n        });\n        return response.data;\n    } catch (error) {\n        throw new Error(error);\n    }\n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst gallery = document.querySelector('.gallery');\n\nexport function createMarkup(obj) {\n    const imageItem = obj.hits.map(image =>\n    `<li class=\"gallery-item\">\n    <div class=\"img-wrapper\">\n  <a class=\"gallery-link\" href=${image.largeImageURL}>\n  <img class='gallery-image' src=${image.webformatURL} data-source=${image.largeImageURL} alt='${image.tags}'/>\n  </a></div>\n  <ul class=\"card\">\n  <li>\n  <h3>Likes</h3>\n  <p>${image.likes}</p></li>\n  <li>\n  <h3>Views</h3>\n  <p>${image.views}</p>\n  </li>\n  <li>\n  <h3>Comments</h3>\n  <p>${image.comments}</p></li>\n  <li><h3>Downloads</h3>\n  <p>${image.downloads}</p></li>\n  </ul>\n  </li>`).join('');\n    gallery.insertAdjacentHTML('beforeend', imageItem);\n    new SimpleLightbox('.gallery a')\n}\n\n\n","import { fetchData } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.load-btn');\nlet currentQuery = '';\nconst loader = document.querySelector('.loader');\n\n\nfunction showLoading() {\n    loader.classList.add('active');\n};\n\nfunction hideLoading() {\n    loader.classList.remove('active');\n}\n\nfunction showLoadMore() {\n    loadMore.classList.add('active');\n}\n\nfunction hideLoadMore() {\n    loadMore.classList.remove('active');\n}\n\nlet page = 1;\nlet totalPages = 1;\n\nform.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    const userInput = event.target.elements[0].value.trim();\n    \n    if (userInput !== '') {\n        currentQuery = userInput;\n        gallery.innerHTML = '';\n        page = 1;\n        showLoading();\n        try {\n            const data = await fetchData(currentQuery, page);\n\n            if (data.hits.length === 0) {\n                iziToast.show({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    backgroundColor: '#ef4040',\n                    messageColor: '#fff',\n                    position: 'topRight',\n                    maxWidth: 432,\n                });\n                hideLoadMore();\n            } else {\n                createMarkup(data);\n                totalPages = Math.ceil(data.totalHits / 15);\n                if (page < totalPages) {\n                    showLoadMore();\n                } else if(page > totalPages || page === totalPages){\n                    hideLoadMore();\n                    iziToast.show({\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        backgroundColor: '#ef4040',\n                        messageColor: '#fff',\n                        position: 'topRight',\n                        maxWidth: 432,\n                    })\n                }\n            }\n        } catch (error) {\n            console.log(error);\n        } finally {\n            hideLoading();\n        }\n    }\n}\n\n\nloadMore.addEventListener('click', handleLoadMore);\nasync function handleLoadMore() {\n    page += 1;\n    showLoading();\n    try {\n        const data = await fetchData(currentQuery, page); \n        createMarkup(data);\n        if (page >= totalPages) {\n            hideLoadMore();\n        }\n    } catch (error) {\n        console.log(error);\n    } finally {\n        hideLoading();\n    }\nconst imageCard = document.querySelector('.gallery-item');\n    const cardHeight = imageCard.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 3 - 72,\n        behavior: \"smooth\"\n    });\n}\n\n"],"names":["baseURL","myAPIKey","fetchData","inputValue","page","axios","error","gallery","createMarkup","obj","imageItem","image","SimpleLightbox","form","loadMore","currentQuery","loader","showLoading","hideLoading","showLoadMore","hideLoadMore","totalPages","handleSubmit","event","userInput","data","iziToast","handleLoadMore","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,2BACVC,EAAW,qCAGV,eAAeC,EAAUC,EAAYC,EAAM,CAC9C,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIL,EAAS,CACtC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CACT,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,MAAM,IAAI,MAAMA,CAAK,CACxB,CACL,CClBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAaC,EAAK,CAC9B,MAAMC,EAAYD,EAAI,KAAK,IAAIE,GAC/B;AAAA;AAAA,iCAE6BA,EAAM,aAAa;AAAA,mCACjBA,EAAM,YAAY,gBAAgBA,EAAM,aAAa,SAASA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,OAKpGA,EAAM,KAAK;AAAA;AAAA;AAAA,OAGXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,OAIXA,EAAM,QAAQ;AAAA;AAAA,OAEdA,EAAM,SAAS;AAAA;AAAA,QAEd,EAAE,KAAK,EAAE,EACbJ,EAAQ,mBAAmB,YAAaG,CAAS,EACjD,IAAIE,EAAe,YAAY,CACnC,CC1BA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCN,EAAU,SAAS,cAAc,UAAU,EAC3CO,EAAW,SAAS,cAAc,WAAW,EACnD,IAAIC,EAAe,GACnB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAG/C,SAASC,GAAc,CACnBD,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEA,SAASE,GAAc,CACnBF,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEA,SAASG,GAAe,CACpBL,EAAS,UAAU,IAAI,QAAQ,CACnC,CAEA,SAASM,GAAe,CACpBN,EAAS,UAAU,OAAO,QAAQ,CACtC,CAEA,IAAIV,EAAO,EACPiB,EAAa,EAEjBR,EAAK,iBAAiB,SAAUS,CAAY,EAE5C,eAAeA,EAAaC,EAAO,CAC/BA,EAAM,eAAc,EACpB,MAAMC,EAAYD,EAAM,OAAO,SAAS,CAAC,EAAE,MAAM,OAEjD,GAAIC,IAAc,GAAI,CAClBT,EAAeS,EACfjB,EAAQ,UAAY,GACpBH,EAAO,EACPa,IACA,GAAI,CACA,MAAMQ,EAAO,MAAMvB,EAAUa,EAAcX,CAAI,EAE3CqB,EAAK,KAAK,SAAW,GACrBC,EAAS,KAAK,CACV,QAAS,2EACT,gBAAiB,UACjB,aAAc,OACd,SAAU,WACV,SAAU,GAC9B,CAAiB,EACDN,MAEAZ,EAAaiB,CAAI,EACjBJ,EAAa,KAAK,KAAKI,EAAK,UAAY,EAAE,EACtCrB,EAAOiB,EACPF,KACMf,EAAOiB,GAAcjB,IAASiB,KACpCD,IACAM,EAAS,KAAK,CACV,QAAS,6DACT,gBAAiB,UACjB,aAAc,OACd,SAAU,WACV,SAAU,GAClC,CAAqB,GAGZ,OAAQpB,EAAO,CACZ,QAAQ,IAAIA,CAAK,CAC7B,QAAkB,CACNY,GACH,CACJ,CACL,CAGAJ,EAAS,iBAAiB,QAASa,CAAc,EACjD,eAAeA,GAAiB,CAC5BvB,GAAQ,EACRa,IACA,GAAI,CACA,MAAMQ,EAAO,MAAMvB,EAAUa,EAAcX,CAAI,EAC/CI,EAAaiB,CAAI,EACbrB,GAAQiB,GACRD,GAEP,OAAQd,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACNY,GACH,CAED,MAAMU,EADQ,SAAS,cAAc,eAAe,EACvB,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACZ,IAAKA,EAAa,EAAI,GACtB,SAAU,QAClB,CAAK,CACL"}